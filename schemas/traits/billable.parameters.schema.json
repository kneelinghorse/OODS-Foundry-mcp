{
  "$schema": "https://json-schema.org/draft/07/schema",
  "$id": "https://trait-engine.dev/schemas/traits/billable",
  "title": "Billable Trait Parameters",
  "description": "Configures recurring billing defaults for composed objects.",
  "type": "object",
  "properties": {
    "defaultCurrency": {
      "type": "string",
      "description": "ISO 4217 currency code applied when no currency is provided by data.",
      "pattern": "^[A-Za-z]{3}$",
      "default": "usd"
    },
    "billingIntervals": {
      "type": "array",
      "description": "Allowed billing interval identifiers (e.g., monthly, yearly).",
      "items": {
        "type": "string",
        "minLength": 1,
        "maxLength": 32
      },
      "minItems": 1,
      "uniqueItems": true,
      "default": ["monthly", "quarterly", "annual"]
    },
    "minorUnits": {
      "type": "integer",
      "description": "Number of fractional units comprising a single currency unit (typically 100).",
      "minimum": 1,
      "maximum": 1000,
      "default": 100
    },
    "paymentTiming": {
      "type": "string",
      "description": "Whether billing charges at period start (prepaid) or end (postpaid).",
      "enum": ["prepaid", "postpaid"],
      "default": "prepaid"
    },
    "supportProration": {
      "type": "boolean",
      "description": "Whether mid-cycle plan changes generate prorated charges or credits.",
      "default": false
    },
    "cycleAnchorDay": {
      "type": "integer",
      "description": "Day of the month for renewal anchoring. 0 means no anchoring.",
      "minimum": 0,
      "maximum": 31,
      "default": 0
    }
  },
  "additionalProperties": false,
  "examples": [
    {
      "defaultCurrency": "usd",
      "billingIntervals": ["monthly", "yearly"],
      "minorUnits": 100
    },
    {
      "defaultCurrency": "eur",
      "billingIntervals": ["monthly"],
      "minorUnits": 100
    }
  ]
}
