/**
 * Interface definitions for Transaction
 * Canonical transaction record tracking monetary movement, lifecycle, and audit metadata.
 *
 * DO NOT EDIT - This file is auto-generated by the object type generator.
 * Source: /Users/systemsystems/portfolio/OODS-Foundry/objects/core/Transaction.object.yaml
 * Traits: Stateful, Timestampable, Priceable, Cancellable, Archivable
 */
export interface StateTransition {
  readonly from_state: string;
  readonly to_state: string;
  readonly timestamp: string;
  readonly reason?: string;
  readonly actor_id?: string;
}

export interface Transaction {
  /**
   * Optional narrative describing why the entity was archived.
   *
   * Source: Archivable (trait)
   */
  archive_reason?: string;

  /**
   * Timestamp for when the entity entered the archived state.
   *
   * Source: Archivable (trait)
   */
  archived_at?: string | null;

  /**
   * Billing cadence when pricing_model indicates recurring revenue.
   *
   * Source: Priceable (trait)
   */
  billing_interval?: 'one_time';

  /**
   * Indicates whether cancellation occurs at the natural period end instead of immediately.
   *
   * Source: Cancellable (trait)
   *
   * Default: false
   */
  cancel_at_period_end: boolean;

  /**
   * Free-form detail describing why cancellation occurred.
   *
   * Source: Cancellable (trait)
   */
  cancellation_reason?: string;

  /**
   * Structured reason code chosen from the allowedReasons parameter.
   *
   * Source: Cancellable (trait)
   */
  cancellation_reason_code?: 'customer_request' | 'suspected_fraud' | 'duplicate_charge' | 'payment_method_error';

  /**
   * Timestamp capturing when the cancellation workflow was initiated.
   *
   * Source: Cancellable (trait)
   */
  cancellation_requested_at?: string;

  /**
   * Sales channel through which the transaction was initiated.
   *
   * Source: Transaction (object override)
   *
   * Default: 'online'
   */
  channel: 'online' | 'in_app' | 'point_of_sale' | 'partner';

  /**
   * Timestamp recording when the entity was first created.
   *
   * Source: Timestampable (trait)
   */
  created_at: string;

  /**
   * ISO currency code for the unit amount.
   *
   * Source: Priceable (trait)
   */
  currency: 'USD' | 'EUR' | 'GBP' | 'JPY' | 'AUD';

  /**
   * Flag indicating whether the entity is currently archived.
   *
   * Source: Archivable (trait)
   *
   * Default: false
   */
  is_archived: boolean;

  /**
   * Lifecycle event associated with the most recent timestamp mutation.
   *
   * Source: Timestampable (trait)
   */
  last_event: 'initiated' | 'authorized' | 'settled' | 'refunded' | 'failed';

  /**
   * Timestamp for the lifecycle event captured in last_event.
   *
   * Source: Timestampable (trait)
   */
  last_event_at?: string;

  /**
   * Timestamp when the transaction occurred in the source system.
   *
   * Source: Transaction (object override)
   */
  occurred_at: string;

  /**
   * Tenant organization responsible for the transaction.
   *
   * Source: Transaction (object override)
   */
  organization_id?: string;

  /**
   * Funding source used to complete the transaction.
   *
   * Source: Transaction (object override)
   */
  payment_method: 'card' | 'bank_transfer' | 'digital_wallet' | 'invoice';

  /**
   * Provider reference code linking to the payment processor.
   *
   * Source: Transaction (object override)
   */
  payment_reference?: string;

  /**
   * Monetization model applied to the entity.
   *
   * Source: Priceable (trait)
   */
  pricing_model: 'one_time' | 'usage_based';

  /**
   * Timestamp for when the entity was restored from an archived state.
   *
   * Source: Archivable (trait)
   */
  restored_at?: string | null;

  /**
   * Fraud assessment score assigned during authorization.
   *
   * Source: Transaction (object override)
   */
  risk_score?: number;

  /**
   * Chronological log of state transitions.
   *
   * Source: Stateful (trait)
   *
   * Default: []
   */
  state_history?: StateTransition[];

  /**
   * Canonical lifecycle state derived from the states parameter.
   *
   * Source: Stateful (trait)
   */
  status: 'pending' | 'authorized' | 'settled' | 'failed' | 'refunded';

  /**
   * Defines whether taxes are included in the displayed price.
   *
   * Source: Priceable (trait)
   *
   * Default: 'exclusive'
   */
  tax_behavior: 'exclusive' | 'inclusive';

  /**
   * Unique identifier for the transaction record.
   *
   * Source: Transaction (object override)
   */
  transaction_id: string;

  /**
   * Base unit price expressed in the smallest currency denomination.
   *
   * Source: Priceable (trait)
   */
  unit_amount_cents: number;

  /**
   * Timestamp for the most recent modification, when available.
   *
   * Source: Timestampable (trait)
   */
  updated_at?: string;

  /**
   * Identifier of the user associated with the transaction.
   *
   * Source: Transaction (object override)
   */
  user_id: string;
}
