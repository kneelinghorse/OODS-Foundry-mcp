Technical Standard: Comprehensive Comparative Analysis of Default Parameterization and Parity Alignment in ECharts and D3.js
1. Introduction: The Architectural Divergence of Default States
In the specialized domain of data visualization engineering, the distinction between Apache ECharts and D3.js (Data-Driven Documents) is frequently reduced to a dichotomy of convenience versus control. However, a rigorous technical analysis reveals a more fundamental divergence: the architectural handling of default parameterization. This divergence stems from the core design philosophies of the two libraries—ECharts as a declarative, configuration-based system utilizing a high-performance Canvas rendering engine (ZRender), and D3.js as a functional, computational kernel operating primarily within the Document Object Model (DOM) via SVG.

The "default state" of a visualization is not merely a starting point; it is a manifestation of the library's internal logic, performance optimizations, and aesthetic biases. For the visualization architect, relying on defaults without forensic understanding introduces significant risk, particularly when attempting to achieve parity between the two systems. A default Sankey diagram in ECharts will resolve layout conflicts differently than one in D3, not because of random chance, but because of hard-coded constants governing iteration counts and relaxation algorithms. A default Force-Directed Graph in ECharts will explode outward with significantly higher repulsive energy than its D3 counterpart, driven by differing scalar values in the underlying physics engine.

This report provides an exhaustive, forensic analysis of the default parameters for four critical visualization modules: Hierarchy (Treemap, Sunburst), Network Topology (Force-Directed Graph), and Flow Dynamics (Sankey). By dissecting the source code logic—referenced via specific research snippets—and examining the mathematical implications of these defaults, we establish a robust Parity Expectations Framework. This framework serves as a translation layer, allowing engineers to align the behaviors of these two distinct libraries, ensuring that a dataset rendered in ECharts is visually and functionally indistinguishable from the same dataset rendered in D3.js.

1.1 The Philosophy of "Opinionated" vs. "Agnostic" Defaults
To understand the specific parameter discrepancies detailed in this report, one must first accept the philosophical divergence that governs them.

Apache ECharts is designed to be opinionated. Its defaults are calibrated to produce a "production-ready" chart immediately upon instantiation. Deep within the source code, such as src/chart/treemap/treemapVisual.ts  or src/layout/forceLayout.ts , developers have made specific choices about color palettes, padding, animation curves, and interaction behaviors. These choices are often based on heuristic observations of what constitutes a "good" chart for the average use case. For example, the default decision to apply a specific squareRatio to treemaps  suggests an intent to optimize for label readability over pure mathematical squarification.   

Conversely, D3.js is designed to be agnostic. It functions as a set of primitives. Its defaults are mathematical baselines—often zero, null, or identity functions—intended to be overridden. A "default" D3 treemap has no visual manifestation until the developer explicitly binds data to SVG rectangles and defines their fill, stroke, and dimensions. The defaults in D3, such as nodePadding being zero or alphaDecay being strictly mathematical , are chosen for computational predictability rather than aesthetic readiness. D3 assumes the developer will build the "opinion" on top of the kernel.   

1.2 The Rendering Engine Constraint: Canvas vs. SVG
A critical, often overlooked factor influencing default parameters is the underlying rendering engine. ECharts defaults to Canvas (via ZRender) , while D3 defaults to SVG. This impacts defaults in two ways:   

Coordinate Precision and Anti-aliasing: Canvas rendering often requires different default line widths and opacity settings to achieve the same visual sharpness as SVG. ECharts defaults often include slight opacity adjustments or specific stroke alignments to mitigate anti-aliasing artifacts that D3, relying on the browser's SVG vector engine, does not need to address by default.

Interaction Models: Because Canvas is a "flat" bitmap to the DOM, ECharts must simulate interaction (hover, click, drag) through an internal event manager. This necessitates default parameters for hit-detection areas and event throttling that D3, which relies on native DOM event listeners, does not require.

This report will systematically analyze how these architectural realities manifest in the default parameters of specific chart types, beginning with the complex physics of network visualizations.

2. Network Topologies: The Physics of Force-Directed Graphs
The Force-Directed Graph is arguably the most complex visualization to align because it relies on a non-deterministic simulation. Both ECharts and D3 use a Velocity Verlet numerical integrator combined with the Barnes-Hut approximation to simulate N-body problems (O(NlogN) complexity). However, the tuning constants—specifically the forces of repulsion, gravity, and the rate of simulation decay—are drastically different, leading to the "Explosive vs. Clumped" parity problem.   

2.1 The Simulation Engine: Alpha Decay and Cooldown
The "temperature" of the simulation, often denoted as alpha (α), determines how aggressively nodes move to resolve conflicting forces. The rate at which this temperature drops controls how long the simulation runs before stabilizing.

2.1.1 D3.js: The 300-Tick Standard
In d3-force, the simulation is controlled by alphaDecay.

Default Parameter: simulation.alphaDecay()

Default Value: ≈0.0228.   

Mathematical Implication: The simulation stops when the current alpha is less than alphaMin (default 0.001). The formula for the number of iterations (ticks) is ⌈log(α 
min
​
 )/log(1−α 
decay
​
 )⌉. With defaults, this results in approximately 300 ticks:

ticks≈ 
log(1−0.0228)
log(0.001)
​
 ≈300
Behavior: A default D3 graph will animate for roughly 5-6 seconds (assuming 60fps) and then freeze. The layout is static thereafter unless manually restarted.

2.1.2 ECharts: The Continuous or Synchronous Layout
ECharts handles the "cooldown" differently depending on the layoutAnimation parameter.

Default Behavior: layoutAnimation: true.   

Mechanism: ECharts often performs a pre-calculation step or runs the simulation with a different decay curve optimized for visual smoothness on Canvas.

Parity Gap: Users migrating from ECharts to D3 often perceive D3 graphs as "stopping too early" or "not fully resolving" because ECharts may run the simulation longer or with a gentler decay in its internal loop to ensure the layout is fully expanded before the final render frame is finalized.

2.2 The Forces of Separation: Repulsion vs. Charge
The most visible discrepancy between a default ECharts graph and a D3 graph is the spacing between nodes.

2.2.1 D3.js: The Weak Electrostatic Force
D3 uses d3.forceManyBody to simulate electrostatic charge.

Parameter: .strength()

Default Value: -30.   

Significance: The negative sign indicates repulsion. A value of -30 is relatively weak. For a graph with 100+ nodes, a strength of -30 will result in a tight, dense cluster where labels overlap significantly.

Source Code Insight: The default is hardcoded in d3-force/src/manyBody.js: function strength() { return -30; }.   

2.2.2 ECharts: The Strong Repulsion
ECharts uses a repulsion parameter in its force object.

Parameter: series-graph.force.repulsion

Default Value: 50.   

Significance: ECharts defines repulsion as a positive scalar (internally treated as a repulsive force). However, the magnitude is significantly higher. In the ECharts physics engine, a repulsion of 50 is roughly equivalent to a D3 strength of -200 to -300.

Behavior: A default ECharts graph will "explode" outwards, filling the available canvas space much more aggressively than D3.

Parity Alignment Strategy: To align a D3 graph to ECharts defaults, the developer must increase the repulsive force significantly:

JavaScript
// D3 Parity Config
const simulation = d3.forceSimulation(nodes)
   .force("charge", d3.forceManyBody().strength(-200)) // Increased from -30
Conversely, to make ECharts behave like D3, the repulsion must be lowered to roughly 10-15.

2.3 The Centripetal Force: Gravity vs. Centering
How does the graph stay on the screen if nodes are repelling each other?

2.3.1 ECharts: The Gravity Constant
ECharts implements a gravity parameter.

Default Value: 0.1.   

Mechanism: This is a true centripetal force that pulls all nodes toward the center of the layout (width/2, height/2). The force is proportional to the distance from the center. It acts like a rubber band holding the exploding nodes together.

2.3.2 D3.js: The Center Translation
D3 defaults to d3.forceCenter.

Default Value: (0,0) (or user defined width/2, height/2).   

Mechanism: Crucially, forceCenter is not a force that pulls nodes. It is a translation constraint that shifts the entire coordinate system at every tick so that the center of mass remains at the center point. It does not compress the graph; it merely centers it.   

The "Flying Node" Problem: Because D3 lacks a default "gravity" (in the ECharts sense), outlier nodes in D3 can drift infinitely far away if the repulsion is high. ECharts' gravity prevents this.

Parity Alignment Strategy: To replicate ECharts' gravity: 0.1 in D3, one cannot use forceCenter. Instead, one must add positioning forces:

JavaScript
// Replicating ECharts 'gravity' in D3
.force("x", d3.forceX(width / 2).strength(0.1))
.force("y", d3.forceY(height / 2).strength(0.1))
2.4 Edge Dynamics: Distance and Tension
The links (edges) between nodes act as springs.

Feature	ECharts Default (force.edgeLength)	D3.js Default (forceLink.distance)	Analysis
Length/Distance	
30 

30 

Exact Parity. Both libraries have settled on 30 pixels as the standard default rest length for edges.
Iteration/Bias	Bias based on degree	Bias based on degree	Both libraries typically weight the constraint solving such that nodes with fewer connections move more than nodes with many connections (anchoring the hubs).
  
2.5 Summary of Network Parity
The "Default ECharts Graph" is high-energy (strong repulsion) and contained (gravity), designed to fill a rectangular canvas. The "Default D3 Graph" is low-energy (weak repulsion) and unconstrained (no gravity), designed to be a mathematically pure representation of local connections. Migrating between them requires a transformation of the physics constants, specifically multiplying D3 repulsion by a factor of ~6-10 and adding explicit centripetal forces.

3. Hierarchical Tiling: The Rectilinear Logic of Treemaps
The Treemap visualization represents hierarchical data via nested rectangles. While seemingly simple, the algorithm used to tile these rectangles—and the spacing reserved between them—defines the legibility of the chart.

3.1 Tiling Algorithms: The "Squarified" Nuance
Both libraries default to a variation of the "Squarified" algorithm, introduced by Bruls, Huizing, and van Wijk (2000). This algorithm attempts to produce rectangles with an aspect ratio close to 1 (squares), which are easier for the human eye to compare than thin strips. However, ECharts introduces a subtle but significant deviation in its default target.   

3.1.1 ECharts: The Golden Ratio Target
Deep within the treemapVisual.ts and TreemapSeries.ts source code, ECharts defines a parameter squareRatio.

Default Value: ≈1.618 (The Golden Ratio: 0.5×(1+ 
5

​
 )).   

The "Visual" Reason: ECharts designers recognized that perfect squares (ratio 1:1) are not always ideal for text labels, which are typically horizontal. A rectangle with a Golden Ratio aspect provides a more natural container for a label (e.g., "North America") without requiring excessive hyphenation or font scaling.

Algorithmic Behavior: The tiling engine penalizes deviations from 1.618 rather than deviations from 1.0.

3.1.2 D3.js: The Perfect Square Target
D3's d3-hierarchy uses d3.treemapSquarify as the default tiler.

Default Value: Aspect Ratio Target = 1.0.   

Behavior: D3 will aggressively create 1:1 squares whenever the data allows.

Parity Implications: A default ECharts treemap will look "elongated" compared to a default D3 treemap. To force D3 to match ECharts, the tiling function must be customized:

JavaScript
// D3 Parity with ECharts
d3.treemap().tile(d3.treemapSquarify.ratio(1.618))
3.2 The Box Model: Padding and The "Gutter"
The legibility of a treemap depends heavily on the separation between a parent node and its children.

3.2.1 ECharts: The Implicit Gutter
ECharts treats the treemap with a standard CSS-like box model.

Default Padding: ECharts applies a default internal padding (often 5px) to leaf nodes and groups to ensure that the hierarchy is visually distinct.   

Gap Width: The roam and nodeClick features often necessitate this padding to allow for visual feedback (selection outlines) without overlap.

3.2.2 D3.js: The Zero-Padding Baseline
D3 defaults to mathematical purity.

Default Padding: paddingInner, paddingOuter, paddingTop all default to 0.   

Visual Consequence: A default D3 treemap looks like a solid block of color. The boundaries between parents and children are invisible unless the developer explicitly adds stroke styling or sets paddingInner.

Parity Alignment Strategy: Migrating from D3 to ECharts requires removing the default padding if "seamless" look is desired:

JavaScript
// ECharts Parity with D3
series:
3.3 Depth Management: Drill-Down vs. Full Render
This is the most significant functional default.

ECharts (leafDepth): Defaults to null (show all) or sometimes 1 depending on the dataset size and browser. ECharts has built-in "Drill Down" behavior. When a user clicks a node, the chart automatically zooms into that subtree, hiding the rest of the hierarchy. This is a complex interactive default enabled out-of-the-box.   

D3.js: D3 calculates the coordinates for every node in the passed hierarchy. It has no concept of "drill-down" in the layout itself. If the dataset has 10,000 nodes, D3 renders 10,000 rectangles (or 10,000 <g> elements).

Insight: The "default" ECharts treemap is an interactive application. The "default" D3 treemap is a static geometry generator. Parity here cannot be achieved via parameters alone; it requires writing a substantial interaction handler in D3 to filter the hierarchy data (root.descendants()) based on click events.

4. Radial Hierarchies: The Sunburst Projection
The Sunburst chart is effectively a Treemap projected into polar coordinates. The parity alignment involves mapping linear depth to radial radius and breadth to angular sweep.

4.1 Angular Coordinate Systems
The fundamental disconnect between the two libraries lies in their definition of "Zero."

4.1.1 ECharts: The Compass Orientation
Parameter: series-sunburst.startAngle

Default Value: 90.   

Interpretation: ECharts places the "start" of the first sector at the 12 o'clock position (90 degrees in standard Cartesian, or North on a compass).

Direction: Clockwise.

4.1.2 D3.js: The Unit Circle Orientation
Parameter: d3.arc().startAngle()

Default Value: 0 (Radians).

Interpretation: In SVG coordinate space (where y is down), 0 radians is typically at the 12 o'clock position, but the layout generation (d3.partition) often outputs x coordinates from 0 to 2π.

Parity Gap: While both may visually start at the top, the input units differ (Degrees vs. Radians). ECharts handles the conversion internally. D3 requires the developer to strictly manage the x domain map to radians.

4.2 Interaction Defaults: The "Descendant" Focus
ECharts v5 introduced a powerful default interaction for Sunbursts known as emphasis.focus.

ECharts Default: focus: 'descendant' (or 'series' depending on version nuance).   

Behavior: When the mouse hovers over a sector, ECharts automatically reduces the opacity of all sectors that are not descendants (children/grandchildren) or ancestors of the hovered node. This highlights the "path" of the data.

D3 Default: None. Hovering triggers standard CSS :hover styles if defined, but D3 does not traverse the graph to find descendants and style them differently by default.

Parity Alignment Strategy: To replicate the ECharts default in D3, one must implement a recursive traverser:

JavaScript
// D3 Parity with ECharts Focus
d3.selectAll("path").on("mouseover", function(event, d) {
    const sequence = d.descendants();
    d3.selectAll("path").style("opacity", 0.3); // Dim all
    d3.selectAll("path").filter(node => sequence.includes(node))
       .style("opacity", 1); // Highlight descendants
});
5. Flow Dynamics: The Sankey Diagram
The Sankey diagram is notoriously difficult to parameterize because its layout depends on an iterative relaxation algorithm (moving nodes up and down to minimize edge crossings). The "quality" of the chart is directly proportional to the number of iterations, trading off performance.

5.1 The Iteration Gap: Speed vs. Quality
D3.js (d3-sankey):

Default Iterations: 6.   

Reasoning: D3 prioritizes a fast render. With only 6 iterations, the algorithm quickly settles, but complex networks often remain "tangled" with unnecessary link crossings.

ECharts:

Default Iterations: 32 (typically).   

Reasoning: ECharts prioritizes a clean layout. The higher iteration count allows the relaxation algorithm to converge on a local minimum that significantly reduces visual clutter.

Visual Consequence: A Sankey diagram rendered with default D3 settings will often look significantly worse (more crossed lines) than the same data in ECharts. This is not a flaw in D3's algorithm, but a difference in the default trade-off between CPU time and visual optimization.

5.2 Node Geometry Defaults
Parameter	ECharts Default	D3.js Default	Analysis
Node Width	
20px 

24px 

D3 nodes are slightly wider/chunkier.
Node Padding	
8px 

8px 

Exact Parity. Both libraries agree that 8px is the ideal minimum vertical separation to prevent label overlap.
Link Curvature	0.5 (Curveness)	0.5 (Curvature)	Exact Parity. Both use a cubic Bézier curve where the control points are horizontally offset by half the distance.
  
5.3 Alignment Logic
ECharts: Defaults to justify (aligns nodes to the left and right edges of the container, expanding the diagram to fill width).

D3.js: Defaults to d3.sankeyJustify.   

Parity: Both libraries default to the same alignment logic, ensuring that the "shape" of the flow is generally consistent, provided the iteration counts are matched.

6. Implementation and Parity Framework
The analysis of these four modules reveals a clear pattern: ECharts defaults are Presentation-First, while D3 defaults are Calculation-First.

6.1 The "Universal Transition" Factor
A critical modern default in ECharts v5 is the "Universal Transition". When data changes, or when the chart type changes (e.g., Sunburst to Treemap), ECharts attempts to morph the geometry naturally. D3 has no default transition state; selection.transition() must be explicitly invoked and configured with duration and easing functions.   

Parity Requirement: To match the "smoothness" of a default ECharts application, a D3 developer must wrap every data update in a transition block:

JavaScript
// D3 Parity with ECharts Universal Transition
const t = d3.transition().duration(500).ease(d3.easeCubicInOut);
selection.data(data).join(...)
   .transition(t)
   .attr(...)
6.2 Consolidated Parity Matrix
The following table summarizes the critical parameter overrides required to align the two libraries.

Visualization	Parameter Scope	To Make D3 Look Like ECharts (Default)	To Make ECharts Look Like D3 (Default)
Treemap	Aspect Ratio	tile(d3.treemapSquarify.ratio(1.618))	series.squareRatio: 1
Treemap	Padding	paddingInner(5).paddingOuter(5)	series.itemStyle.gapWidth: 0
Sunburst	Start Angle	Ensure 12 o'clock start (Rotate -90 or offset)	series.startAngle: 0 (if D3 is unrotated)
Sunburst	Focus	Implement mouseover opacity filter for descendants	series.emphasis.focus: 'none'
Graph	Repulsion	forceManyBody().strength(-200)	series.force.repulsion: 15
Graph	Gravity	Add forceX(w/2, 0.1) and forceY(h/2, 0.1)	series.force.gravity: 0
Sankey	Iterations	sankey().iterations(32)	series.layoutIterations: 6
Sankey	Node Width	sankey().nodeWidth(20)	series.nodeWidth: 24
7. Conclusion
The divergence in default parameters between ECharts and D3.js is not arbitrary; it is a reflection of their distinct roles in the visualization stack. ECharts provides a "high floor," guaranteeing a visually coherent, interactive, and aesthetically tuned result (Golden Ratio tiling, high Sankey iterations, strong gravity) with zero configuration. D3.js provides a "high ceiling," offering a raw, unopinionated mathematical kernel (Zero padding, Unit Ratio tiling, low iteration counts) that maximizes performance and flexibility.

For the domain expert, "Parity" is not a toggle but a translation process. It requires the injection of aesthetic logic (padding, easing, ratios) into D3, or the stripping of "opinionated" layers (gravity, focus effects) from ECharts. By adhering to the Parity Expectations Framework defined in this report, engineering teams can bridge the gap between these two powerful tools, ensuring consistency across diverse data visualization portfolios.

8. Reference Data Source Map
Treemap Analysis:    

Sunburst Analysis:    

Graph/Network Analysis:    

Sankey Analysis:    

General/Architecture:    


github.com
echarts/src/chart/treemap/treemapVisual.ts at master - GitHub
Opens in a new window

github.com
echarts/src/layout/barGrid.ts at master - GitHub
Opens in a new window

lists.apache.org
[incubator-echarts] branch merge-release-to-next created (now e8c44b6)
Opens in a new window

observablehq.com
D3 Force Dissected: Alpha / Stephen Osserman - Observable
Opens in a new window

echarts.apache.org
Features - Apache ECharts
Opens in a new window

api.highcharts.com
series.networkgraph.layoutAlgorithm.approximation | highcharts API Reference
Opens in a new window

jheer.github.io
The Barnes-Hut Approximation
Opens in a new window

g6.antv.antgroup.com
D3 Force-Directed Layout | G6 Graph Visualization Framework in JavaScript
Opens in a new window

stackoverflow.com
Echarts 4 graph plot: specify symbol per category - Stack Overflow
Opens in a new window

d3js.org
Force simulations | D3 by Observable
Opens in a new window

d3indepth.com
D3 Force layout - D3 in Depth
Opens in a new window

d3js.org
Many-body force | D3 by Observable
Opens in a new window

pkg.go.dev
opts package - github.com/go-echarts/go-echarts/v2/opts - Go Packages
Opens in a new window

github.com
Create a link between two series · Issue #13033 · apache/echarts - GitHub
Opens in a new window

d3js.org
Center force | D3 by Observable - D3.js
Opens in a new window

stackoverflow.com
Difference between D3 forceX/forceY and forceCenter - Stack Overflow
Opens in a new window

d3js.org
Link force | D3 by Observable - D3.js
Opens in a new window

grokipedia.com
Treemapping - Grokipedia
Opens in a new window

stackoverflow.com
How to generate a treemap using only squares - Stack Overflow
Opens in a new window

ipecharts.readthedocs.io
ipecharts.option.seriesitems.treemap module
Opens in a new window

using-d3js.com
Treemaps - Using D3.js
Opens in a new window

d3js.org
Treemap | D3 by Observable
Opens in a new window

apache.github.io
Dataset - Concepts - Handbook - Apache ECharts
Opens in a new window

echarts.apache.org
Documentation - Apache ECharts
Opens in a new window

npmjs.com
d3-hierarchy - NPM
Opens in a new window

learn.wynenterprise.com
Sunburst EChart | Wyn Documentation
Opens in a new window

echarts.apache.org
5.6 - What's New - Basics - Handbook - Apache ECharts
Opens in a new window

github.com
d3/d3-sankey: Visualize flow between nodes in a directed acyclic network. - GitHub
Opens in a new window

github.com
如何让sankey图的边的层级低于节点的层级 · Issue #9374 · apache/echarts - GitHub
Opens in a new window

api.highcharts.com
series.sankey.nodePadding | highcharts API Reference
Opens in a new window

docs.evidence.dev
Sankey Diagram - Evidence Docs
Opens in a new window

echarts.apache.org
What's New in Apache ECharts 5.2.0
Opens in a new window

d3js.org
Partition | D3 by Observable - D3.js
Opens in a new window

echarts.apache.org
Changelog - Apache ECharts
