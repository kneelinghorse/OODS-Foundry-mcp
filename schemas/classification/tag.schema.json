{
  "$schema": "https://json-schema.org/draft/07/schema",
  "$id": "https://trait-engine.dev/schemas/classification/tag",
  "title": "Tag",
  "description": "Canonical Folksonomy tag representation with governance metadata.",
  "type": "object",
  "additionalProperties": false,
  "properties": {
    "id": {
      "type": "string",
      "pattern": "^[a-z0-9][a-z0-9_-]{1,63}$"
    },
    "name": {
      "type": "string",
      "minLength": 1,
      "maxLength": 80
    },
    "slug": {
      "type": "string",
      "minLength": 1,
      "maxLength": 80,
      "pattern": "^[a-z0-9]+(?:-[a-z0-9]+)*$"
    },
    "usageCount": {
      "type": "integer",
      "minimum": 0,
      "maximum": 10000000,
      "default": 0
    },
    "state": {
      "type": "string",
      "enum": ["active", "pending_review", "archived"],
      "default": "active"
    },
    "synonyms": {
      "type": "array",
      "items": {
        "type": "string",
        "minLength": 1,
        "maxLength": 80
      },
      "maxItems": 16,
      "default": []
    },
    "isCanonical": {
      "type": "boolean",
      "default": true
    },
    "createdAt": {
      "type": "string",
      "format": "date-time"
    },
    "updatedAt": {
      "type": "string",
      "format": "date-time"
    },
    "metadata": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "lastAppliedAt": {
          "type": "string",
          "format": "date-time"
        },
        "autoGenerated": {
          "type": "boolean"
        },
        "flaggedReason": {
          "type": "string",
          "minLength": 4,
          "maxLength": 280
        },
        "synonymOf": {
          "type": "string",
          "minLength": 2,
          "maxLength": 64
        }
      }
    }
  },
  "required": ["id", "name", "slug", "usageCount", "state", "synonyms", "isCanonical"]
}
