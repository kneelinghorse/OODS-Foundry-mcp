{
  "id": "authz-rbac-registry",
  "version": "1.0.0",
  "schemas": [
    {
      "id": "role",
      "title": "Role (Core 5 Table)",
      "description": "System-wide RBAC role definition from R21.2 Part 4.2 TABLE 1.",
      "status": "stable",
      "citation": "R21.2 Part 4.2 TABLE 1",
      "schema": {
        "$id": "https://oods-foundry/authz/role.json",
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": ["id", "name"],
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "name": {
            "type": "string",
            "pattern": "^[A-Za-z0-9_]{2,64}$",
            "minLength": 2,
            "maxLength": 64
          },
          "description": {
            "type": "string",
            "maxLength": 512
          }
        }
      },
      "uiSchema": {
        "name": {
          "ui:autofocus": true,
          "ui:help": "Lowercase/uppercase alphanumeric + underscore per TABLE 1"
        },
        "description": {
          "ui:widget": "textarea",
          "ui:options": {
            "rows": 3
          }
        }
      },
      "example": {
        "id": "11111111-2222-3333-4444-555555555555",
        "name": "Admin",
        "description": "Provides organization-wide management rights"
      }
    },
    {
      "id": "permission",
      "title": "Permission (Atomic Operation)",
      "description": "resource:action style permission entry per R21.2 Part 4.2 TABLE 2.",
      "status": "stable",
      "citation": "R21.2 Part 4.2 TABLE 2",
      "schema": {
        "$id": "https://oods-foundry/authz/permission.json",
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": ["id", "name"],
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "name": {
            "type": "string",
            "pattern": "^[a-z][a-z0-9._-]*:[a-z][a-z0-9._-]*$",
            "maxLength": 128
          },
          "description": {
            "type": "string",
            "maxLength": 512
          },
          "resource_type": {
            "type": "string",
            "pattern": "^[a-z0-9._-]+$",
            "minLength": 2,
            "maxLength": 64
          }
        }
      },
      "uiSchema": {
        "name": {
          "ui:placeholder": "document:create"
        },
        "resource_type": {
          "ui:placeholder": "document"
        }
      },
      "example": {
        "id": "77777777-8888-9999-0000-111111111111",
        "name": "document:share",
        "description": "Allows sharing documents externally",
        "resource_type": "document"
      }
    },
    {
      "id": "membership",
      "title": "Membership (Tenant Junction)",
      "description": "User↔Organization↔Role triple described in R21.2 Part 2.2 / TABLE 4.",
      "status": "stable",
      "citation": "R21.2 Part 2.2 & TABLE 4",
      "schema": {
        "$id": "https://oods-foundry/authz/membership.json",
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": ["id", "user_id", "organization_id", "role_id", "created_at", "updated_at"],
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "user_id": {
            "type": "string",
            "format": "uuid"
          },
          "organization_id": {
            "type": "string",
            "format": "uuid"
          },
          "role_id": {
            "type": "string",
            "format": "uuid"
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time"
          }
        },
        "description": "UNIQUE(user_id, organization_id, role_id) enforced in persistence layer"
      },
      "uiSchema": {
        "created_at": {
          "ui:widget": "date-time"
        },
        "updated_at": {
          "ui:widget": "date-time"
        }
      },
      "example": {
        "id": "aaaa1111-bbbb-cccc-dddd-eeeeeeeeeeee",
        "user_id": "123e4567-e89b-12d3-a456-426614174000",
        "organization_id": "789e0123-e45b-67c8-d901-234567890abc",
        "role_id": "11111111-2222-3333-4444-555555555555",
        "created_at": "2025-11-19T00:00:00Z",
        "updated_at": "2025-11-19T00:00:00Z"
      }
    },
    {
      "id": "role-hierarchy",
      "title": "Role Hierarchy Edge",
      "description": "Adjacency list edge (parent→child) from R21.2 Part 3.1.",
      "status": "stable",
      "citation": "R21.2 Part 3.1",
      "schema": {
        "$id": "https://oods-foundry/authz/role-hierarchy.json",
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "object",
        "additionalProperties": false,
        "required": ["parent_role_id", "child_role_id"],
        "properties": {
          "parent_role_id": {
            "type": "string",
            "format": "uuid"
          },
          "child_role_id": {
            "type": "string",
            "format": "uuid"
          },
          "depth": {
            "type": "integer",
            "minimum": 1
          }
        },
        "description": "Self-referential edges are rejected in runtime validator"
      },
      "uiSchema": {
        "depth": {
          "ui:widget": "hidden"
        }
      },
      "example": {
        "parent_role_id": "11111111-2222-3333-4444-555555555555",
        "child_role_id": "99999999-aaaa-bbbb-cccc-dddddddddddd",
        "depth": 1
      }
    }
  ]
}
