id: B37.4
title: Context Switcher for Object Explorer
status: Queued
sprint: Sprint 37
created: 2025-12-03
updated: 2025-12-03
tags: [hero-demo, contexts, navigation-phase-2]

objective: |
  Add a context switcher to the existing Object × Context Explorer,
  allowing users to see the same object rendered in different contexts
  (Detail, List, Card, Timeline, Form, Inline).

  This completes the "two-axis" demo:
  - Object switcher (User / Subscription / Invoice) ← DONE in B37.2
  - Context switcher (Detail / List / Card / ...) ← THIS MISSION

context: |
  WHAT WE LEARNED FROM B37.2:
  
  1. Side-by-side grids don't work
     - Content gets clipped, looks cramped, breaks at various widths
     - Full-page render with switcher is the right pattern
  
  2. The Object Explorer works well
     - Object pill buttons + description line
     - Full-page render below
     - Clean, scannable, professional
  
  3. Content differentiation matters
     - Showing the same User 8 times with different layouts isn't compelling
     - Showing how Detail vs List vs Card display DIFFERENT information is
  
  INFRASTRUCTURE:
  - RenderObject supports: detail, list, form, timeline, card, inline
  - Chart/Dashboard contexts may not apply to User object (skip or stub)
  
  EXISTING STORY:
  - stories/objects/ObjectExplorer.stories.tsx (or wherever B37.2 landed)

deliverables:
  - path: stories/objects/ObjectExplorer.stories.tsx
    action: modify
    details: |
      Add a second row of toggle buttons for context selection:
```
      ┌─────────────────────────────────────────────────────────────┐
      │ Object × Context Explorer                                   │
      │ Select an object to see how it renders across view contexts │
      │                                                             │
      │ Select Object:                                              │
      │ [User] [Subscription] [Invoice]                             │
      │ Identity record with status, tags, and activity history     │
      │                                                             │
      │ Select Context:                                             │
      │ [Detail] [List] [Card] [Timeline] [Form] [Inline]          │
      │ Full page view with all fields, actions, and panels         │
      │                                                             │
      │ ┌─────────────────────────────────────────────────────────┐ │
      │ │                                                         │ │
      │ │  [Rendered object in selected context]                  │ │
      │ │                                                         │ │
      │ └─────────────────────────────────────────────────────────┘ │
      └─────────────────────────────────────────────────────────────┘
```
      
      CONTEXT DESCRIPTIONS (shown below context buttons):
      - Detail: "Full page view with all fields, actions, and panels"
      - List: "Compact row optimized for scanning tables"
      - Card: "Self-contained summary for grid layouts"
      - Timeline: "Activity-focused with events and timestamps"
      - Form: "Editable fields with validation states"
      - Inline: "Minimal footprint for embedding in content"
      
      STATE MANAGEMENT:
      - selectedObject: 'user' | 'subscription' | 'invoice'
      - selectedContext: 'detail' | 'list' | 'card' | 'timeline' | 'form' | 'inline'
      - URL sync optional (nice-to-have for sharing)

  - path: (optional) Context-specific fixture adjustments
    action: evaluate
    details: |
      Some contexts may need adjusted content to be meaningful:
      - List context: May need multiple items to show table behavior
      - Timeline context: Needs activity/event data
      - Form context: Needs editable field configuration
      
      Evaluate what exists. If a context renders empty or broken,
      either fix the fixture or disable that context for that object.

success_criteria:
  - Context switcher appears below object switcher
  - Switching contexts re-renders the object in new layout
  - Each context has a description explaining its purpose
  - At least 4 contexts work well for User object (Detail, List, Card, + one more)
  - No layout breaking, clipping, or overflow issues

validation:
  - command: pnpm storybook --smoke-test
    expected: Story loads without errors
  - manual: Switch between all context options
  - manual: Switch between objects while in non-Detail context
  - manual: Verify descriptions update with context selection

dependencies:
  - B37.2 (Object Explorer must be complete and working)

estimated_effort: 3 hours

notes: |
  DESIGN DECISION: Extend existing story vs. create new
  
  We chose to extend the Object Explorer rather than create a separate
  "Same Object Different Contexts" story because:
  1. Avoids duplicate navigation entries
  2. Shows the full matrix in one place
  3. Matches the toggle pattern that already works
  4. Users can explore both dimensions freely
  
  WHAT NOT TO DO:
  - Don't try side-by-side grid again (proven to fail)
  - Don't show 8 tiny panels (unreadable)
  - Don't force all contexts to work for all objects (some combos may not make sense)
  
  STRETCH GOAL (future sprint):
  - "Compare" mode showing 2 contexts side-by-side at 50% width
  - Only if both contexts render cleanly at that width